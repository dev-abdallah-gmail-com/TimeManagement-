@page "/tasks/{id:int}"
@using TimeManagement.Client.Services
@inject IApiService Api
@using System.Net.Http.Json

<h3>Task Detail</h3>

@if (task == null)
{
 <p><em>Loading...</em></p>
}
else
{
 <dl class="row">
 <dt class="col-sm-3">Title</dt>
 <dd class="col-sm-9">@task.Title</dd>
 <dt class="col-sm-3">Description</dt>
 <dd class="col-sm-9">@task.Description</dd>
 <dt class="col-sm-3">Status</dt>
 <dd class="col-sm-9">@task.Status</dd>
 </dl>
}

@code {
 [Parameter]
 public int id { get; set; }

 private TaskDetailDto? task;
 protected override async Task OnInitializedAsync()
 {
 try
 {
 var t = await Api.GetTaskAsync(id);
 if (t != null)
 {
 task = new TaskDetailDto
 {
 Id = t.Id,
 Title = t.Title,
 Description = t.Description ?? string.Empty,
 Status = t.Status.ToString()
 };
 }
 }
 catch
 {
 // ignore errors
 }
 }

 class TaskDetailDto
 {
 public int Id { get; set; }
 public string Title { get; set; } = string.Empty;
 public string Description { get; set; } = string.Empty;
 public string Status { get; set; } = string.Empty;
 }
}
